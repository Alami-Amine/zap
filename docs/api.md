## Modules

<dl>
<dt><a href="#module_JS API_ low level database access">JS API: low level database access</a></dt>
<dd><p>This module provides generic DB functions for performing SQL queries.</p>
</dd>
<dt><a href="#module_DB API_ DB types and enums.">DB API: DB types and enums.</a></dt>
<dd><p>This module provides mappings between database columns and JS keys.</p>
</dd>
<dt><a href="#module_DB API_ DB mappings between columns and JS object keys.">DB API: DB mappings between columns and JS object keys.</a></dt>
<dd><p>This module provides mappings between database columns and JS keys.</p>
</dd>
<dt><a href="#module_DB API_ user configuration queries against the database.">DB API: user configuration queries against the database.</a></dt>
<dd><p>This module provides queries for user configuration.</p>
</dd>
<dt><a href="#module_DB API_ generic queries against the database.">DB API: generic queries against the database.</a></dt>
<dd><p>This module provides generic queries.</p>
</dd>
<dt><a href="#module_DB API_ package-based queries.">DB API: package-based queries.</a></dt>
<dd><p>This module provides queries related to imports and exports of files.</p>
</dd>
<dt><a href="#module_DB API_ package-based queries.">DB API: package-based queries.</a></dt>
<dd><p>This module provides queries related to packages.</p>
</dd>
<dt><a href="#module_DB API_ session related queries.">DB API: session related queries.</a></dt>
<dd><p>This module provides session related queries.</p>
</dd>
<dt><a href="#module_DB API_ zcl database access">DB API: zcl database access</a></dt>
<dd><p>This module provides queries for ZCL static queries.</p>
</dd>
<dt><a href="#module_JS API_ generator logic">JS API: generator logic</a></dt>
<dd></dd>
<dt><a href="#module_JS API_ generator logic">JS API: generator logic</a></dt>
<dd></dd>
<dt><a href="#module_REST API_ admin functions">REST API: admin functions</a></dt>
<dd><p>This module provides the REST API to the admin functions.</p>
</dd>
<dt><a href="#module_REST API_ generation functions">REST API: generation functions</a></dt>
<dd><p>This module provides the REST API to the generation.</p>
</dd>
<dt><a href="#module_REST API_ static zcl functions">REST API: static zcl functions</a></dt>
<dd><p>This module provides the REST API to the static zcl queries.</p>
</dd>
<dt><a href="#module_REST API_ generation functions">REST API: generation functions</a></dt>
<dd><p>This module provides the REST API to the generation.</p>
</dd>
<dt><a href="#module_REST API_ user data">REST API: user data</a></dt>
<dd><p>This module provides the REST API to the user specific data.</p>
</dd>
<dt><a href="#module_JS API_ http server">JS API: http server</a></dt>
<dd><p>This module provides the HTTP server functionality.</p>
</dd>
</dl>

## Constants

<dl>
<dt><a href="#replyId">replyId</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#queryZcl">queryZcl</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#yargs">yargs</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#dbApi">dbApi</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#path">path</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#path">path</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#env">env</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#queryZcl">queryZcl</a></dt>
<dd><p>This module provides the APIs for validating inputs to the database, and returning flags indicating if
things were successful or not.</p>
</dd>
<dt><a href="#fs">fs</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
</dl>

## Functions

<dl>
<dt><a href="#zap_header">zap_header()</a></dt>
<dd><p>Copyright (c) 2020 Silicon Labs</p>
<p>   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at</p>
<pre><code>   http://www.apache.org/licenses/LICENSE-2.0</code></pre>
<p>   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.</p>
</dd>
<dt><a href="#ensurePackageId">ensurePackageId(context)</a> ⇒</dt>
<dd><p>Returns the promise that resolves with the ZCL properties package id.</p>
</dd>
<dt><a href="#collectBlocks">collectBlocks(resultArray, fn, context)</a> ⇒</dt>
<dd><p>Helpful function that collects the individual blocks by using elements of an array as a context,
executing promises for each, and collecting them into the outgoing string.</p>
</dd>
<dt><a href="#zcl_enums">zcl_enums(options)</a> ⇒</dt>
<dd><p>Block helper iterating over all enums.</p>
</dd>
<dt><a href="#zcl_structs">zcl_structs(options)</a> ⇒</dt>
<dd><p>Block helper iterating over all structs.</p>
</dd>
<dt><a href="#zcl_clusters">zcl_clusters(options)</a> ⇒</dt>
<dd><p>Block helper iterating over all clusters.</p>
</dd>
<dt><a href="#zcl_commands">zcl_commands(options)</a> ⇒</dt>
<dd><p>Block helper iterating over all commands.
There are two modes of this helper:
  when used in a global context, it iterates over ALL commands in the database.
  when used inside a <code>zcl_cluster</code> block helper, it iterates only over the commands for that cluster.</p>
</dd>
<dt><a href="#zcl_attributes">zcl_attributes(options)</a> ⇒</dt>
<dd><p>Block helper iterating over all attributes.
There are two modes of this helper:
  when used in a global context, it iterates over ALL attributes in the database.
  when used inside a <code>zcl_cluster</code> block helper, it iterates only over the attributes for that cluster.</p>
</dd>
<dt><a href="#exportSessionKeyValues">exportSessionKeyValues(db, sessionId)</a> ⇒</dt>
<dd><p>Resolves to an array of objects that contain &#39;key&#39; and &#39;value&#39;</p>
</dd>
<dt><a href="#exportEndpoints">exportEndpoints(db, sessionId)</a> ⇒</dt>
<dd><p>Resolves to an array of endpoints.</p>
</dd>
<dt><a href="#exportEndpointTypes">exportEndpointTypes(db, sessionId)</a> ⇒</dt>
<dd><p>Resolves to an array of endpoint types.</p>
</dd>
<dt><a href="#exportSessionPackages">exportSessionPackages(db, sessionId)</a></dt>
<dd><p>Resolves with data for packages.</p>
</dd>
<dt><a href="#exportDataIntoFile">exportDataIntoFile(db, sessionId, filePath)</a> ⇒</dt>
<dd><p>Toplevel file that takes a given session ID and exports the data into the file</p>
</dd>
<dt><a href="#createStateFromDatabase">createStateFromDatabase(db, sessionId)</a> ⇒</dt>
<dd><p>Given a database and a session id, this method returns a promise that
resolves with a state object that needs to be saved into a file.</p>
</dd>
<dt><a href="#importSessionKeyValues">importSessionKeyValues(db, sessionId, keyValuePairs)</a></dt>
<dd><p>Resolves with a promise that imports session key values.</p>
</dd>
<dt><a href="#readDataFromFile">readDataFromFile(filePath)</a> ⇒</dt>
<dd><p>Reads the data from the file and resolves with the state object if all is good.</p>
</dd>
<dt><a href="#writeStateToDatabase">writeStateToDatabase(sessionId, state)</a> ⇒</dt>
<dd><p>Given a state object, this method returns a promise that resolves
with the succesfull writing into the database.</p>
</dd>
<dt><a href="#importDataFromFile">importDataFromFile(db, filePath)</a> ⇒</dt>
<dd><p>Writes the data from the file into a new session.</p>
</dd>
<dt><a href="#processCommandLineArguments">processCommandLineArguments(argv)</a> ⇒</dt>
<dd><p>Process the command line arguments and resets the state in this file
to the specified values.</p>
</dd>
<dt><a href="#doOpen">doOpen(menuItem, browserWindow, event)</a></dt>
<dd><p>Perform a file-&gt;open operation.</p>
</dd>
<dt><a href="#doSave">doSave(menuItem, browserWindow, event)</a></dt>
<dd><p>Perform a save, defering to save as if file is not yet selected.</p>
</dd>
<dt><a href="#doSaveAs">doSaveAs(menuItem, browserWindow, event)</a></dt>
<dd><p>Perform save as.</p>
</dd>
<dt><a href="#generateInDir">generateInDir(browserWindow)</a></dt>
<dd><p>This function gets the directory where user wants the output and
calls generateCode function which generates the code in the user selected
output.</p>
</dd>
<dt><a href="#setHandlebarTemplateDirectory">setHandlebarTemplateDirectory(browserWindow)</a></dt>
<dd><p>This function gets the directory where user wants the output and calls
generateCode function which generates the code in the user selected output.</p>
</dd>
<dt><a href="#fileSave">fileSave(db, winId, filePath)</a> ⇒</dt>
<dd><p>perform the save.</p>
</dd>
<dt><a href="#fileOpen">fileOpen(db, winId, filePaths)</a></dt>
<dd><p>Perform the do open action, possibly reading in multiple files.</p>
</dd>
<dt><a href="#readAndProcessFile">readAndProcessFile(db, filePath)</a></dt>
<dd><p>Process a single file, parsing it in as JSON and then possibly opening
a new window if all is good.</p>
</dd>
<dt><a href="#initMenu">initMenu(port)</a></dt>
<dd><p>Initialize a menu.</p>
</dd>
<dt><a href="#createOrShowWindow">createOrShowWindow(port)</a></dt>
<dd><p>Call this function to create a new or show an existing preference window.</p>
</dd>
<dt><a href="#windowCreate">windowCreate(port, [filePath], [sessionId])</a> ⇒</dt>
<dd><p>Create a window, possibly with a given file path and with a desire to attach to a given sessionId</p>
<p>Win id will be passed on in the URL, and if sessionId is present, so will it.</p>
</dd>
<dt><a href="#runSdkGeneration">runSdkGeneration(ctx)</a></dt>
<dd><p>Using SDK generation templates it returns a promise of created files.</p>
</dd>
<dt><a href="#calculateCrc">calculateCrc(context)</a> ⇒</dt>
<dd><p>Promises to calculate the CRC of the file, and resolve with an object { filePath, data, actualCrc }</p>
</dd>
<dt><a href="#initializeSessionPackage">initializeSessionPackage(db, sessionId)</a> ⇒</dt>
<dd><p>This function assigns a proper package ID to the session.</p>
</dd>
<dt><a href="#readPropertiesFile">readPropertiesFile(ctx)</a> ⇒</dt>
<dd><p>Reads the properties file into ctx.data and also calculates crc into ctx.crc</p>
</dd>
<dt><a href="#recordToplevelPackage">recordToplevelPackage(ctx)</a></dt>
<dd><p>Records the toplevel package information and puts ctx.packageId into the context.</p>
</dd>
<dt><a href="#collectData">collectData(propertiesFile)</a> ⇒</dt>
<dd><p>Promises to read the properties file, extract all the actual xml files, and resolve with the array of files.</p>
</dd>
<dt><a href="#readZclFile">readZclFile(file)</a> ⇒</dt>
<dd><p>Promises to read a file and resolve with the content</p>
</dd>
<dt><a href="#parseZclFile">parseZclFile(argument)</a> ⇒</dt>
<dd><p>Promises to parse the ZCL file, expecting object of { filePath, data, packageId, msg }</p>
</dd>
<dt><a href="#prepareBitmap">prepareBitmap(bm)</a> ⇒</dt>
<dd><p>Prepare bitmap for database insertion.</p>
</dd>
<dt><a href="#processBitmaps">processBitmaps(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Processes bitmaps for DB insertion.</p>
</dd>
<dt><a href="#prepareCluster">prepareCluster(cluster)</a> ⇒</dt>
<dd><p>Prepare XML cluster for insertion into the database.
This method can also prepare clusterExtensions.</p>
</dd>
<dt><a href="#processClusters">processClusters(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Process clusters for insertion into the database.</p>
</dd>
<dt><a href="#processClusterExtensions">processClusterExtensions(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Cluster Extension contains attributes and commands in a same way as regular cluster,
and it has an attribute code=&quot;0xXYZ&quot; where code is a cluster code.</p>
</dd>
<dt><a href="#processGlobals">processGlobals(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Processes the globals in the XML files. The <code>global</code> tag contains
attributes and commands in a same way as cluster or clusterExtension</p>
</dd>
<dt><a href="#prepareDomain">prepareDomain(domain)</a> ⇒</dt>
<dd><p>Convert domain from XMl to domain for DB.</p>
</dd>
<dt><a href="#processDomains">processDomains(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Process domains for insertion.</p>
</dd>
<dt><a href="#prepareStruct">prepareStruct(struct)</a> ⇒</dt>
<dd><p>Prepares structs for the insertion into the database.</p>
</dd>
<dt><a href="#processStructs">processStructs(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Processes structs.</p>
</dd>
<dt><a href="#prepareEnum">prepareEnum(en)</a> ⇒</dt>
<dd><p>Prepares an enum for insertion into the database.</p>
</dd>
<dt><a href="#processEnums">processEnums(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Processes the enums.</p>
</dd>
<dt><a href="#prepareDeviceType">prepareDeviceType(deviceType)</a> ⇒</dt>
<dd><p>Preparation step for the device types.</p>
</dd>
<dt><a href="#processDeviceTypes">processDeviceTypes(db, filePath, packageId, data)</a> ⇒</dt>
<dd><p>Process all device types.</p>
</dd>
<dt><a href="#processParsedZclData">processParsedZclData(db, argument)</a> ⇒</dt>
<dd><p>After XML parser is done with the barebones parsing, this function
branches the individual toplevel tags.</p>
</dd>
<dt><a href="#resolveLaterPromises">resolveLaterPromises(laterPromises)</a></dt>
<dd><p>Resolve later promises.
This function resolves the later promises associated with processParsedZclData.</p>
</dd>
<dt><a href="#processZclPostLoading">processZclPostLoading(db)</a> ⇒</dt>
<dd><p>Promises to perform a post loading step.</p>
</dd>
<dt><a href="#qualifyZclFile">qualifyZclFile(db, info, parentPackageId)</a> ⇒</dt>
<dd><p>Promises to qualify whether zcl file needs to be reloaded.
If yes, the it will resolve with {filePath, data, packageId}
If not, then it will resolve with {error}</p>
</dd>
<dt><a href="#parseZclFiles">parseZclFiles(db, ctx)</a> ⇒</dt>
<dd><p>Promises to iterate over all the XML files and returns an aggregate promise
that will be resolved when all the XML files are done, or rejected if at least one fails.</p>
</dd>
<dt><a href="#recordVersion">recordVersion(db, ctx)</a></dt>
<dd><p>Records the version into the database.</p>
</dd>
<dt><a href="#loadZcl">loadZcl(db, propertiesFile)</a> ⇒</dt>
<dd><p>Toplevel function that loads the properties file and orchestrates the promise chain.</p>
</dd>
</dl>

<a name="module_JS API_ low level database access"></a>

## JS API: low level database access

This module provides generic DB functions for performing SQL queries.

- [JS API: low level database access](#module*JS API* low level database access)
  - [~dbBeginTransaction(db)](#module*JS API* low level database access..dbBeginTransaction) ⇒
  - [~dbCommit(db)](#module*JS API* low level database access..dbCommit) ⇒
  - [~dbRemove(db, query, args)](#module*JS API* low level database access..dbRemove) ⇒
  - [~dbUpdate(db, query, args)](#module*JS API* low level database access..dbUpdate) ⇒
  - [~dbInsert(db, query, args)](#module*JS API* low level database access..dbInsert) ⇒
  - [~dbAll(db, query, args)](#module*JS API* low level database access..dbAll) ⇒
  - [~dbGet(db, query, args)](#module*JS API* low level database access..dbGet) ⇒
  - [~dbMultiSelect(db, sql, arrayOfArrays)](#module*JS API* low level database access..dbMultiSelect)
  - [~dbMultiInsert(db, sql, arrayOfArrays)](#module*JS API* low level database access..dbMultiInsert) ⇒
  - [~closeDatabase(database)](#module*JS API* low level database access..closeDatabase) ⇒
  - [~initDatabase(sqlitePath)](#module*JS API* low level database access..initDatabase) ⇒
  - [~insertOrReplaceSetting(db, version)](#module*JS API* low level database access..insertOrReplaceSetting) ⇒
  - [~loadSchema(db, schemaPath, appVersion)](#module*JS API* low level database access..loadSchema) ⇒

<a name="module_JS API_ low level database access..dbBeginTransaction"></a>

### JS API: low level database access~dbBeginTransaction(db) ⇒

Returns a promise to begin a transaction

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves without an argument and rejects with an error from BEGIN TRANSACTION query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_JS API_ low level database access..dbCommit"></a>

### JS API: low level database access~dbCommit(db) ⇒

Returns a promise to execute a commit.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves without an argument or rejects with an error from COMMIT query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_JS API_ low level database access..dbRemove"></a>

### JS API: low level database access~dbRemove(db, query, args) ⇒

Returns a promise to execute a DELETE FROM query.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolve with the number of delete rows, or rejects with an error from query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| query | <code>\*</code> |
| args  | <code>\*</code> |

<a name="module_JS API_ low level database access..dbUpdate"></a>

### JS API: low level database access~dbUpdate(db, query, args) ⇒

Returns a promise to execute an update query.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves without an argument, or rejects with an error from the query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| query | <code>\*</code> |
| args  | <code>\*</code> |

<a name="module_JS API_ low level database access..dbInsert"></a>

### JS API: low level database access~dbInsert(db, query, args) ⇒

Returns a promise to execute an insert query.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with the rowid from the inserted row, or rejects with an error from the query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| query | <code>\*</code> |
| args  | <code>\*</code> |

<a name="module_JS API_ low level database access..dbAll"></a>

### JS API: low level database access~dbAll(db, query, args) ⇒

Returns a promise to execute a query to perform a select that returns all rows that match a query.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with the rows that got retrieved from the database, or rejects with an error from the query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| query | <code>\*</code> |
| args  | <code>\*</code> |

<a name="module_JS API_ low level database access..dbGet"></a>

### JS API: low level database access~dbGet(db, query, args) ⇒

Returns a promise to execute a query to perform a select that returns first row that matches a query.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with a single row that got retrieved from the database, or rejects with an error from the query.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| query | <code>\*</code> |
| args  | <code>\*</code> |

<a name="module_JS API_ low level database access..dbMultiSelect"></a>

### JS API: low level database access~dbMultiSelect(db, sql, arrayOfArrays)

Returns a promise to perform a prepared statement, using data from array for SQL parameters.
It resolves with an array of rows, containing the data, or rejects with an error.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)

| Param         | Type            |
| ------------- | --------------- |
| db            | <code>\*</code> |
| sql           | <code>\*</code> |
| arrayOfArrays | <code>\*</code> |

<a name="module_JS API_ low level database access..dbMultiInsert"></a>

### JS API: low level database access~dbMultiInsert(db, sql, arrayOfArrays) ⇒

Returns a promise to perfom a prepared statement, using data from array for SQL parameters.
It resolves with an array of rowids, or rejects with an error.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with the array of rowids for the rows that got inserted, or rejects with an error from the query.

| Param         | Type            |
| ------------- | --------------- |
| db            | <code>\*</code> |
| sql           | <code>\*</code> |
| arrayOfArrays | <code>\*</code> |

<a name="module_JS API_ low level database access..closeDatabase"></a>

### JS API: low level database access~closeDatabase(database) ⇒

Returns a promise that will resolve when the database in question is closed.
Rejects with an error if closing fails.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves without an argument or rejects with error from the database closing.

| Param    | Type            |
| -------- | --------------- |
| database | <code>\*</code> |

<a name="module_JS API_ low level database access..initDatabase"></a>

### JS API: low level database access~initDatabase(sqlitePath) ⇒

Returns a promise to initialize a database.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with the database object that got created, or rejects with an error if something went wrong.

| Param      | Type            |
| ---------- | --------------- |
| sqlitePath | <code>\*</code> |

<a name="module_JS API_ low level database access..insertOrReplaceSetting"></a>

### JS API: low level database access~insertOrReplaceSetting(db, version) ⇒

Returns a promise to insert or replace a setting into the database.

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with a rowid of created setting row or rejects with error if something goes wrong.

| Param   | Type            |
| ------- | --------------- |
| db      | <code>\*</code> |
| version | <code>\*</code> |

<a name="module_JS API_ low level database access..loadSchema"></a>

### JS API: low level database access~loadSchema(db, schemaPath, appVersion) ⇒

Returns a promise to load schema into a blank database, and inserts a version to the settings table.j

**Kind**: inner method of [<code>JS API: low level database access</code>](#module*JS API* low level database access)  
**Returns**: A promise that resolves with the same db that got passed in, or rejects with an error.

| Param      | Type            |
| ---------- | --------------- |
| db         | <code>\*</code> |
| schemaPath | <code>\*</code> |
| appVersion | <code>\*</code> |

<a name="module_DB API_ DB types and enums."></a>

## DB API: DB types and enums.

This module provides mappings between database columns and JS keys.

<a name="module_DB API_ DB mappings between columns and JS object keys."></a>

## DB API: DB mappings between columns and JS object keys.

This module provides mappings between database columns and JS keys.

<a name="module_DB API_ user configuration queries against the database."></a>

## DB API: user configuration queries against the database.

This module provides queries for user configuration.

<a name="module_DB API_ generic queries against the database."></a>

## DB API: generic queries against the database.

This module provides generic queries.

<a name="module_DB API_ package-based queries."></a>

## DB API: package-based queries.

This module provides queries related to imports and exports of files.

<a name="module_DB API_ package-based queries."></a>

## DB API: package-based queries.

This module provides queries related to packages.

<a name="module_DB API_ session related queries."></a>

## DB API: session related queries.

This module provides session related queries.

<a name="module_DB API_ zcl database access"></a>

## DB API: zcl database access

This module provides queries for ZCL static queries.

- [DB API: zcl database access](#module*DB API* zcl database access)
  - [~selectAllEnums(db)](#module*DB API* zcl database access..selectAllEnums) ⇒
  - [~selectAllBitmaps(db)](#module*DB API* zcl database access..selectAllBitmaps) ⇒
  - [~selectAllDomains(db)](#module*DB API* zcl database access..selectAllDomains) ⇒
  - [~selectAllStructs(db)](#module*DB API* zcl database access..selectAllStructs) ⇒
  - [~selectAllClusters(db)](#module*DB API* zcl database access..selectAllClusters) ⇒
  - [~selectAllDeviceTypes(db)](#module*DB API* zcl database access..selectAllDeviceTypes) ⇒
  - [~insertGlobals(db, packageId, data)](#module*DB API* zcl database access..insertGlobals) ⇒
  - [~insertClusterExtensions(db, packageId, data)](#module*DB API* zcl database access..insertClusterExtensions) ⇒
  - [~insertClusters(db, packageId, data)](#module*DB API* zcl database access..insertClusters) ⇒
  - [~insertDeviceTypes(db, packageId, data)](#module*DB API* zcl database access..insertDeviceTypes) ⇒
  - [~insertDeviceTypeAttributes(db, dtClusterRefDataPairs)](#module*DB API* zcl database access..insertDeviceTypeAttributes)
  - [~insertDeviceTypeCommands(db, dtClusterRefDataPairs)](#module*DB API* zcl database access..insertDeviceTypeCommands)
  - [~insertDomains(db, packageId, data)](#module*DB API* zcl database access..insertDomains) ⇒
  - [~insertStructs(db, packageId, data)](#module*DB API* zcl database access..insertStructs) ⇒
  - [~insertEnums(db, packageId, data)](#module*DB API* zcl database access..insertEnums) ⇒
  - [~insertBitmaps(db, packageId, data)](#module*DB API* zcl database access..insertBitmaps) ⇒

<a name="module_DB API_ zcl database access..selectAllEnums"></a>

### DB API: zcl database access~selectAllEnums(db) ⇒

Retrieves all the enums in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of enums.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..selectAllBitmaps"></a>

### DB API: zcl database access~selectAllBitmaps(db) ⇒

Retrieves all the bitmaps in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of bitmaps.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..selectAllDomains"></a>

### DB API: zcl database access~selectAllDomains(db) ⇒

Retrieves all the domains in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of domains.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..selectAllStructs"></a>

### DB API: zcl database access~selectAllStructs(db) ⇒

Retrieves all the structs in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of structs.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..selectAllClusters"></a>

### DB API: zcl database access~selectAllClusters(db) ⇒

Retrieves all the clusters in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of clusters.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..selectAllDeviceTypes"></a>

### DB API: zcl database access~selectAllDeviceTypes(db) ⇒

Retrieves all the device types in the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise that resolves with the rows of device types.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertGlobals"></a>

### DB API: zcl database access~insertGlobals(db, packageId, data) ⇒

Inserts globals into the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise of globals insertion.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertClusterExtensions"></a>

### DB API: zcl database access~insertClusterExtensions(db, packageId, data) ⇒

Inserts cluster extensions into the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise of cluster extension insertion.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertClusters"></a>

### DB API: zcl database access~insertClusters(db, packageId, data) ⇒

Inserts clusters into the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise of cluster insertion.

| Param     | Type            | Description                                                                                                        |
| --------- | --------------- | ------------------------------------------------------------------------------------------------------------------ |
| db        | <code>\*</code> |                                                                                                                    |
| packageId | <code>\*</code> |                                                                                                                    |
| data      | <code>\*</code> | an array of objects that must contain: code, name, description, define. It also contains commands: and attributes: |

<a name="module_DB API_ zcl database access..insertDeviceTypes"></a>

### DB API: zcl database access~insertDeviceTypes(db, packageId, data) ⇒

Inserts device types into the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: Promise of an insertion of device types.

| Param     | Type            | Description                                                    |
| --------- | --------------- | -------------------------------------------------------------- |
| db        | <code>\*</code> |                                                                |
| packageId | <code>\*</code> |                                                                |
| data      | <code>\*</code> | an array of objects that must contain: code, name, description |

<a name="module_DB API_ zcl database access..insertDeviceTypeAttributes"></a>

### DB API: zcl database access~insertDeviceTypeAttributes(db, dtClusterRefDataPairs)

This handles the loading of device type attribute requirements into the database.
There is a need to post-process to attach the actual attribute ref after the fact

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)

| Param                 | Type            |
| --------------------- | --------------- |
| db                    | <code>\*</code> |
| dtClusterRefDataPairs | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertDeviceTypeCommands"></a>

### DB API: zcl database access~insertDeviceTypeCommands(db, dtClusterRefDataPairs)

This handles the loading of device type command requirements into the database.
There is a need to post-process to attach the actual command ref after the fact

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)

| Param                 | Type            |
| --------------------- | --------------- |
| db                    | <code>\*</code> |
| dtClusterRefDataPairs | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertDomains"></a>

### DB API: zcl database access~insertDomains(db, packageId, data) ⇒

Inserts domains into the database.
data is an array of objects that must contain: name

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: A promise that resolves with an array of rowids of all inserted domains.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertStructs"></a>

### DB API: zcl database access~insertStructs(db, packageId, data) ⇒

Inserts structs into the database.
data is an array of objects that must contain: name

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: A promise that resolves with an array of struct item rowids.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="module_DB API_ zcl database access..insertEnums"></a>

### DB API: zcl database access~insertEnums(db, packageId, data) ⇒

Inserts enums into the database.

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: A promise of enum insertion.

| Param     | Type            | Description                                       |
| --------- | --------------- | ------------------------------------------------- |
| db        | <code>\*</code> |                                                   |
| packageId | <code>\*</code> |                                                   |
| data      | <code>\*</code> | an array of objects that must contain: name, type |

<a name="module_DB API_ zcl database access..insertBitmaps"></a>

### DB API: zcl database access~insertBitmaps(db, packageId, data) ⇒

Inserts bitmaps into the database. Data is an array of objects that must contain: name, type

**Kind**: inner method of [<code>DB API: zcl database access</code>](#module*DB API* zcl database access)  
**Returns**: A promise of bitmap insertions.

| Param     | Type            | Description                                   |
| --------- | --------------- | --------------------------------------------- |
| db        | <code>\*</code> |                                               |
| packageId | <code>\*</code> |                                               |
| data      | <code>\*</code> | Array of object containing 'name' and 'type'. |

<a name="module_JS API_ generator logic"></a>

## JS API: generator logic

- [JS API: generator logic](#module*JS API* generator logic)
  - [~loadGenTemplate()](#module*JS API* generator logic..loadGenTemplate) ⇒
  - [~recordTemplatesPackage(context)](#module*JS API* generator logic..recordTemplatesPackage) ⇒
  - [~loadTemplates(db, genTemplatesJson)](#module*JS API* generator logic..loadTemplates) ⇒
  - [~generateAllTemplates(genResult, pkg, generateOnly)](#module*JS API* generator logic..generateAllTemplates) ⇒
  - [~generateSingleTemplate(genResult, pkg)](#module*JS API* generator logic..generateSingleTemplate) ⇒
  - [~generate(db, packageId)](#module*JS API* generator logic..generate) ⇒
  - [~generateAndWriteFiles(db, sessionId, packageId, outputDirectory)](#module*JS API* generator logic..generateAndWriteFiles) ⇒
  - [~contentIndexer(content)](#module*JS API* generator logic..contentIndexer)
  - [~generateSingleFileForPreview(db, sessionId, fileName)](#module*JS API* generator logic..generateSingleFileForPreview) ⇒
  - [~produceContent(db, sessionId, singlePkg)](#module*JS API* generator logic..produceContent) ⇒

<a name="module_JS API_ generator logic..loadGenTemplate"></a>

### JS API: generator logic~loadGenTemplate() ⇒

Given a path, it will read generation template object into memory.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: context.templates, context.crc

| Param        | Type            |
| ------------ | --------------- |
| context.path | <code>\*</code> |

<a name="module_JS API_ generator logic..recordTemplatesPackage"></a>

### JS API: generator logic~recordTemplatesPackage(context) ⇒

Given a loading context, it records the package into the packages table and adds the packageId field into the resolved context.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves with the same context passed in, except packageId added to it

| Param   | Type            |
| ------- | --------------- |
| context | <code>\*</code> |

<a name="module_JS API_ generator logic..loadTemplates"></a>

### JS API: generator logic~loadTemplates(db, genTemplatesJson) ⇒

Main API function to load templates from a gen-template.json file.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: the loading context, contains: db, path, crc, packageId and templateData

| Param            | Type            | Description           |
| ---------------- | --------------- | --------------------- |
| db               | <code>\*</code> | Database              |
| genTemplatesJson | <code>\*</code> | Path to the JSON file |

<a name="module_JS API_ generator logic..generateAllTemplates"></a>

### JS API: generator logic~generateAllTemplates(genResult, pkg, generateOnly) ⇒

Generates all the templates inside a toplevel package.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves with genResult, that contains all the generated templates, keyed by their 'output'

| Param        | Type            | Default       | Description                                                                                        |
| ------------ | --------------- | ------------- | -------------------------------------------------------------------------------------------------- |
| genResult    | <code>\*</code> |               |                                                                                                    |
| pkg          | <code>\*</code> |               |                                                                                                    |
| generateOnly | <code>\*</code> | <code></code> | if NULL then generate all templates, else only generate template whose out file name matches this. |

<a name="module_JS API_ generator logic..generateSingleTemplate"></a>

### JS API: generator logic~generateSingleTemplate(genResult, pkg) ⇒

Function that generates a single package and adds it to the generation result.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves with the genResult, with newly generated content added.

| Param     | Type            |
| --------- | --------------- |
| genResult | <code>\*</code> |
| pkg       | <code>\*</code> |

<a name="module_JS API_ generator logic..generate"></a>

### JS API: generator logic~generate(db, packageId) ⇒

Main API function to generate stuff.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves into a generation result.

| Param     | Type            | Description                   |
| --------- | --------------- | ----------------------------- |
| db        | <code>\*</code> | Database                      |
| packageId | <code>\*</code> | packageId Template package id |

<a name="module_JS API_ generator logic..generateAndWriteFiles"></a>

### JS API: generator logic~generateAndWriteFiles(db, sessionId, packageId, outputDirectory) ⇒

Generate files and write them into the given directory.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: a promise which will resolve when all the files are written.

| Param           | Type            |
| --------------- | --------------- |
| db              | <code>\*</code> |
| sessionId       | <code>\*</code> |
| packageId       | <code>\*</code> |
| outputDirectory | <code>\*</code> |

<a name="module_JS API_ generator logic..contentIndexer"></a>

### JS API: generator logic~contentIndexer(content)

This function takes a string, and resolves a preview object out of it.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)

| Param   | Type            | Description                  |
| ------- | --------------- | ---------------------------- |
| content | <code>\*</code> | String to form into preview. |

<a name="module_JS API_ generator logic..generateSingleFileForPreview"></a>

### JS API: generator logic~generateSingleFileForPreview(db, sessionId, fileName) ⇒

Generates a single file and feeds it back for preview.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves into a preview object.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |
| fileName  | <code>\*</code> |

<a name="module_JS API_ generator logic..produceContent"></a>

### JS API: generator logic~produceContent(db, sessionId, singlePkg) ⇒

Given db connection, session and a single template package, produce the output.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves with the 'utf8' string that contains the generated content.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |
| singlePkg | <code>\*</code> |

<a name="module_JS API_ generator logic"></a>

## JS API: generator logic

- [JS API: generator logic](#module*JS API* generator logic)
  - [~loadGenTemplate()](#module*JS API* generator logic..loadGenTemplate) ⇒
  - [~recordTemplatesPackage(context)](#module*JS API* generator logic..recordTemplatesPackage) ⇒
  - [~loadTemplates(db, genTemplatesJson)](#module*JS API* generator logic..loadTemplates) ⇒
  - [~generateAllTemplates(genResult, pkg, generateOnly)](#module*JS API* generator logic..generateAllTemplates) ⇒
  - [~generateSingleTemplate(genResult, pkg)](#module*JS API* generator logic..generateSingleTemplate) ⇒
  - [~generate(db, packageId)](#module*JS API* generator logic..generate) ⇒
  - [~generateAndWriteFiles(db, sessionId, packageId, outputDirectory)](#module*JS API* generator logic..generateAndWriteFiles) ⇒
  - [~contentIndexer(content)](#module*JS API* generator logic..contentIndexer)
  - [~generateSingleFileForPreview(db, sessionId, fileName)](#module*JS API* generator logic..generateSingleFileForPreview) ⇒
  - [~produceContent(db, sessionId, singlePkg)](#module*JS API* generator logic..produceContent) ⇒

<a name="module_JS API_ generator logic..loadGenTemplate"></a>

### JS API: generator logic~loadGenTemplate() ⇒

Given a path, it will read generation template object into memory.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: context.templates, context.crc

| Param        | Type            |
| ------------ | --------------- |
| context.path | <code>\*</code> |

<a name="module_JS API_ generator logic..recordTemplatesPackage"></a>

### JS API: generator logic~recordTemplatesPackage(context) ⇒

Given a loading context, it records the package into the packages table and adds the packageId field into the resolved context.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves with the same context passed in, except packageId added to it

| Param   | Type            |
| ------- | --------------- |
| context | <code>\*</code> |

<a name="module_JS API_ generator logic..loadTemplates"></a>

### JS API: generator logic~loadTemplates(db, genTemplatesJson) ⇒

Main API function to load templates from a gen-template.json file.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: the loading context, contains: db, path, crc, packageId and templateData

| Param            | Type            | Description           |
| ---------------- | --------------- | --------------------- |
| db               | <code>\*</code> | Database              |
| genTemplatesJson | <code>\*</code> | Path to the JSON file |

<a name="module_JS API_ generator logic..generateAllTemplates"></a>

### JS API: generator logic~generateAllTemplates(genResult, pkg, generateOnly) ⇒

Generates all the templates inside a toplevel package.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves with genResult, that contains all the generated templates, keyed by their 'output'

| Param        | Type            | Default       | Description                                                                                        |
| ------------ | --------------- | ------------- | -------------------------------------------------------------------------------------------------- |
| genResult    | <code>\*</code> |               |                                                                                                    |
| pkg          | <code>\*</code> |               |                                                                                                    |
| generateOnly | <code>\*</code> | <code></code> | if NULL then generate all templates, else only generate template whose out file name matches this. |

<a name="module_JS API_ generator logic..generateSingleTemplate"></a>

### JS API: generator logic~generateSingleTemplate(genResult, pkg) ⇒

Function that generates a single package and adds it to the generation result.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves with the genResult, with newly generated content added.

| Param     | Type            |
| --------- | --------------- |
| genResult | <code>\*</code> |
| pkg       | <code>\*</code> |

<a name="module_JS API_ generator logic..generate"></a>

### JS API: generator logic~generate(db, packageId) ⇒

Main API function to generate stuff.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves into a generation result.

| Param     | Type            | Description                   |
| --------- | --------------- | ----------------------------- |
| db        | <code>\*</code> | Database                      |
| packageId | <code>\*</code> | packageId Template package id |

<a name="module_JS API_ generator logic..generateAndWriteFiles"></a>

### JS API: generator logic~generateAndWriteFiles(db, sessionId, packageId, outputDirectory) ⇒

Generate files and write them into the given directory.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: a promise which will resolve when all the files are written.

| Param           | Type            |
| --------------- | --------------- |
| db              | <code>\*</code> |
| sessionId       | <code>\*</code> |
| packageId       | <code>\*</code> |
| outputDirectory | <code>\*</code> |

<a name="module_JS API_ generator logic..contentIndexer"></a>

### JS API: generator logic~contentIndexer(content)

This function takes a string, and resolves a preview object out of it.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)

| Param   | Type            | Description                  |
| ------- | --------------- | ---------------------------- |
| content | <code>\*</code> | String to form into preview. |

<a name="module_JS API_ generator logic..generateSingleFileForPreview"></a>

### JS API: generator logic~generateSingleFileForPreview(db, sessionId, fileName) ⇒

Generates a single file and feeds it back for preview.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: promise that resolves into a preview object.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |
| fileName  | <code>\*</code> |

<a name="module_JS API_ generator logic..produceContent"></a>

### JS API: generator logic~produceContent(db, sessionId, singlePkg) ⇒

Given db connection, session and a single template package, produce the output.

**Kind**: inner method of [<code>JS API: generator logic</code>](#module*JS API* generator logic)  
**Returns**: Promise that resolves with the 'utf8' string that contains the generated content.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |
| singlePkg | <code>\*</code> |

<a name="module_REST API_ admin functions"></a>

## REST API: admin functions

This module provides the REST API to the admin functions.

<a name="module_REST API_ admin functions..registerAdminApi"></a>

### REST API: admin functions~registerAdminApi(db, app)

API: /post/sql
Request JSON:

<pre>
  {
    sql: SQL Query
  }
</pre>

Response JSON:

<pre>
  {
    result: Array of rows.
  }
</pre>

**Kind**: inner method of [<code>REST API: admin functions</code>](#module*REST API* admin functions)

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| app   | <code>\*</code> |

<a name="module_REST API_ generation functions"></a>

## REST API: generation functions

This module provides the REST API to the generation.

- [REST API: generation functions](#module*REST API* generation functions)
  - [~registerGenerationApi(db, app)](#module*REST API* generation functions..registerGenerationApi)
  - [~registerUcComponentApi(db, app)](#module*REST API* generation functions..registerUcComponentApi)

<a name="module_REST API_ generation functions..registerGenerationApi"></a>

### REST API: generation functions~registerGenerationApi(db, app)

**Kind**: inner method of [<code>REST API: generation functions</code>](#module*REST API* generation functions)

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| app   | <code>\*</code> |

<a name="module_REST API_ generation functions..registerUcComponentApi"></a>

### REST API: generation functions~registerUcComponentApi(db, app)

**Kind**: inner method of [<code>REST API: generation functions</code>](#module*REST API* generation functions)

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| app   | <code>\*</code> |

<a name="module_REST API_ static zcl functions"></a>

## REST API: static zcl functions

This module provides the REST API to the static zcl queries.

<a name="module_REST API_ static zcl functions..registerStaticZclApi"></a>

### REST API: static zcl functions~registerStaticZclApi(app)

API: /zcl/:entity/:id

**Kind**: inner method of [<code>REST API: static zcl functions</code>](#module*REST API* static zcl functions)

| Param | Type            | Description       |
| ----- | --------------- | ----------------- |
| app   | <code>\*</code> | Express instance. |

<a name="module_REST API_ generation functions"></a>

## REST API: generation functions

This module provides the REST API to the generation.

- [REST API: generation functions](#module*REST API* generation functions)
  - [~registerGenerationApi(db, app)](#module*REST API* generation functions..registerGenerationApi)
  - [~registerUcComponentApi(db, app)](#module*REST API* generation functions..registerUcComponentApi)

<a name="module_REST API_ generation functions..registerGenerationApi"></a>

### REST API: generation functions~registerGenerationApi(db, app)

**Kind**: inner method of [<code>REST API: generation functions</code>](#module*REST API* generation functions)

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| app   | <code>\*</code> |

<a name="module_REST API_ generation functions..registerUcComponentApi"></a>

### REST API: generation functions~registerUcComponentApi(db, app)

**Kind**: inner method of [<code>REST API: generation functions</code>](#module*REST API* generation functions)

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| app   | <code>\*</code> |

<a name="module_REST API_ user data"></a>

## REST API: user data

This module provides the REST API to the user specific data.

<a name="module_JS API_ http server"></a>

## JS API: http server

This module provides the HTTP server functionality.

- [JS API: http server](#module*JS API* http server)
  - [~initHttpServer(db, port)](#module*JS API* http server..initHttpServer) ⇒
  - [~shutdownHttpServer()](#module*JS API* http server..shutdownHttpServer) ⇒
  - [~httpServerPort()](#module*JS API* http server..httpServerPort) ⇒

<a name="module_JS API_ http server..initHttpServer"></a>

### JS API: http server~initHttpServer(db, port) ⇒

Promises to initialize the http server on a given port
using a given database.

**Kind**: inner method of [<code>JS API: http server</code>](#module*JS API* http server)  
**Returns**: A promise that resolves with an express app.

| Param | Type            | Description               |
| ----- | --------------- | ------------------------- |
| db    | <code>\*</code> | Database object to use.   |
| port  | <code>\*</code> | Port for the HTTP server. |

<a name="module_JS API_ http server..shutdownHttpServer"></a>

### JS API: http server~shutdownHttpServer() ⇒

Promises to shut down the http server.

**Kind**: inner method of [<code>JS API: http server</code>](#module*JS API* http server)  
**Returns**: Promise that resolves when server is shut down.  
<a name="module_JS API_ http server..httpServerPort"></a>

### JS API: http server~httpServerPort() ⇒

Port http server is listening on.

**Kind**: inner method of [<code>JS API: http server</code>](#module*JS API* http server)  
**Returns**: port  
<a name="replyId"></a>

## replyId

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="queryZcl"></a>

## queryZcl

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="yargs"></a>

## yargs

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="dbApi"></a>

## dbApi

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="path"></a>

## path

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="path"></a>

## path

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="env"></a>

## env

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="queryZcl"></a>

## queryZcl

This module provides the APIs for validating inputs to the database, and returning flags indicating if
things were successful or not.

**Kind**: global constant  
<a name="fs"></a>

## fs

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global constant  
<a name="zap_header"></a>

## zap_header()

Copyright (c) 2020 Silicon Labs

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

**Kind**: global function  
<a name="ensurePackageId"></a>

## ensurePackageId(context) ⇒

Returns the promise that resolves with the ZCL properties package id.

**Kind**: global function  
**Returns**: promise that resolves with the package id.

| Param   | Type            |
| ------- | --------------- |
| context | <code>\*</code> |

<a name="collectBlocks"></a>

## collectBlocks(resultArray, fn, context) ⇒

Helpful function that collects the individual blocks by using elements of an array as a context,
executing promises for each, and collecting them into the outgoing string.

**Kind**: global function  
**Returns**: Promise that resolves with a content string.

| Param       | Type            | Description                              |
| ----------- | --------------- | ---------------------------------------- |
| resultArray | <code>\*</code> |                                          |
| fn          | <code>\*</code> |                                          |
| context     | <code>\*</code> | The context from within this was called. |

<a name="zcl_enums"></a>

## zcl_enums(options) ⇒

Block helper iterating over all enums.

**Kind**: global function  
**Returns**: Promise of content.

| Param   | Type            |
| ------- | --------------- |
| options | <code>\*</code> |

<a name="zcl_structs"></a>

## zcl_structs(options) ⇒

Block helper iterating over all structs.

**Kind**: global function  
**Returns**: Promise of content.

| Param   | Type            |
| ------- | --------------- |
| options | <code>\*</code> |

<a name="zcl_clusters"></a>

## zcl_clusters(options) ⇒

Block helper iterating over all clusters.

**Kind**: global function  
**Returns**: Promise of content.

| Param   | Type            |
| ------- | --------------- |
| options | <code>\*</code> |

<a name="zcl_commands"></a>

## zcl_commands(options) ⇒

Block helper iterating over all commands.
There are two modes of this helper:
when used in a global context, it iterates over ALL commands in the database.
when used inside a `zcl_cluster` block helper, it iterates only over the commands for that cluster.

**Kind**: global function  
**Returns**: Promise of content.

| Param   | Type            |
| ------- | --------------- |
| options | <code>\*</code> |

<a name="zcl_attributes"></a>

## zcl_attributes(options) ⇒

Block helper iterating over all attributes.
There are two modes of this helper:
when used in a global context, it iterates over ALL attributes in the database.
when used inside a `zcl_cluster` block helper, it iterates only over the attributes for that cluster.

**Kind**: global function  
**Returns**: Promise of content.

| Param   | Type            |
| ------- | --------------- |
| options | <code>\*</code> |

<a name="exportSessionKeyValues"></a>

## exportSessionKeyValues(db, sessionId) ⇒

Resolves to an array of objects that contain 'key' and 'value'

**Kind**: global function  
**Returns**: Promise to retrieve all session key values.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="exportEndpoints"></a>

## exportEndpoints(db, sessionId) ⇒

Resolves to an array of endpoints.

**Kind**: global function  
**Returns**: Promise to retrieve all endpoints.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="exportEndpointTypes"></a>

## exportEndpointTypes(db, sessionId) ⇒

Resolves to an array of endpoint types.

**Kind**: global function  
**Returns**: Promise to retrieve all endpoint types.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="exportSessionPackages"></a>

## exportSessionPackages(db, sessionId)

Resolves with data for packages.

**Kind**: global function

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="exportDataIntoFile"></a>

## exportDataIntoFile(db, sessionId, filePath) ⇒

Toplevel file that takes a given session ID and exports the data into the file

**Kind**: global function  
**Returns**: A promise that resolves with the path of the file written.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |
| filePath  | <code>\*</code> |

<a name="createStateFromDatabase"></a>

## createStateFromDatabase(db, sessionId) ⇒

Given a database and a session id, this method returns a promise that
resolves with a state object that needs to be saved into a file.

**Kind**: global function  
**Returns**: state object that needs to be saved into a file.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="importSessionKeyValues"></a>

## importSessionKeyValues(db, sessionId, keyValuePairs)

Resolves with a promise that imports session key values.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| db            | <code>\*</code> |
| sessionId     | <code>\*</code> |
| keyValuePairs | <code>\*</code> |

<a name="readDataFromFile"></a>

## readDataFromFile(filePath) ⇒

Reads the data from the file and resolves with the state object if all is good.

**Kind**: global function  
**Returns**: Promise of file reading.

| Param    | Type            |
| -------- | --------------- |
| filePath | <code>\*</code> |

<a name="writeStateToDatabase"></a>

## writeStateToDatabase(sessionId, state) ⇒

Given a state object, this method returns a promise that resolves
with the succesfull writing into the database.

**Kind**: global function  
**Returns**: a promise that resolves with the sucessful writing

| Param     | Type            |
| --------- | --------------- |
| sessionId | <code>\*</code> |
| state     | <code>\*</code> |

<a name="importDataFromFile"></a>

## importDataFromFile(db, filePath) ⇒

Writes the data from the file into a new session.

**Kind**: global function  
**Returns**: a promise that resolves with the session Id of the written data.

| Param    | Type            |
| -------- | --------------- |
| db       | <code>\*</code> |
| filePath | <code>\*</code> |

<a name="processCommandLineArguments"></a>

## processCommandLineArguments(argv) ⇒

Process the command line arguments and resets the state in this file
to the specified values.

**Kind**: global function  
**Returns**: parsed argv object

| Param | Type            |
| ----- | --------------- |
| argv  | <code>\*</code> |

<a name="doOpen"></a>

## doOpen(menuItem, browserWindow, event)

Perform a file->open operation.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| menuItem      | <code>\*</code> |
| browserWindow | <code>\*</code> |
| event         | <code>\*</code> |

<a name="doSave"></a>

## doSave(menuItem, browserWindow, event)

Perform a save, defering to save as if file is not yet selected.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| menuItem      | <code>\*</code> |
| browserWindow | <code>\*</code> |
| event         | <code>\*</code> |

<a name="doSaveAs"></a>

## doSaveAs(menuItem, browserWindow, event)

Perform save as.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| menuItem      | <code>\*</code> |
| browserWindow | <code>\*</code> |
| event         | <code>\*</code> |

<a name="generateInDir"></a>

## generateInDir(browserWindow)

This function gets the directory where user wants the output and
calls generateCode function which generates the code in the user selected
output.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| browserWindow | <code>\*</code> |

<a name="setHandlebarTemplateDirectory"></a>

## setHandlebarTemplateDirectory(browserWindow)

This function gets the directory where user wants the output and calls
generateCode function which generates the code in the user selected output.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| browserWindow | <code>\*</code> |

<a name="fileSave"></a>

## fileSave(db, winId, filePath) ⇒

perform the save.

**Kind**: global function  
**Returns**: Promise of saving.

| Param    | Type            |
| -------- | --------------- |
| db       | <code>\*</code> |
| winId    | <code>\*</code> |
| filePath | <code>\*</code> |

<a name="fileOpen"></a>

## fileOpen(db, winId, filePaths)

Perform the do open action, possibly reading in multiple files.

**Kind**: global function

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| winId     | <code>\*</code> |
| filePaths | <code>\*</code> |

<a name="readAndProcessFile"></a>

## readAndProcessFile(db, filePath)

Process a single file, parsing it in as JSON and then possibly opening
a new window if all is good.

**Kind**: global function

| Param    | Type            |
| -------- | --------------- |
| db       | <code>\*</code> |
| filePath | <code>\*</code> |

<a name="initMenu"></a>

## initMenu(port)

Initialize a menu.

**Kind**: global function

| Param | Type            |
| ----- | --------------- |
| port  | <code>\*</code> |

<a name="createOrShowWindow"></a>

## createOrShowWindow(port)

Call this function to create a new or show an existing preference window.

**Kind**: global function

| Param | Type            |
| ----- | --------------- |
| port  | <code>\*</code> |

<a name="windowCreate"></a>

## windowCreate(port, [filePath], [sessionId]) ⇒

Create a window, possibly with a given file path and with a desire to attach to a given sessionId

Win id will be passed on in the URL, and if sessionId is present, so will it.

**Kind**: global function  
**Returns**: BrowserWindow that got created

| Param       | Type            | Default       |
| ----------- | --------------- | ------------- |
| port        | <code>\*</code> |               |
| [filePath]  | <code>\*</code> | <code></code> |
| [sessionId] | <code>\*</code> | <code></code> |

<a name="runSdkGeneration"></a>

## runSdkGeneration(ctx)

Using SDK generation templates it returns a promise of created files.

**Kind**: global function

| Param | Type            | Description                                                                                    |
| ----- | --------------- | ---------------------------------------------------------------------------------------------- |
| ctx   | <code>\*</code> | Contains generationDir, templateDir, db and options dontWrite which can prevent final writing. |

<a name="calculateCrc"></a>

## calculateCrc(context) ⇒

Promises to calculate the CRC of the file, and resolve with an object { filePath, data, actualCrc }

**Kind**: global function  
**Returns**: Promise that resolves with the same object, just adds the 'crc' key into it.

| Param   | Type            | Description                                                                     |
| ------- | --------------- | ------------------------------------------------------------------------------- |
| context | <code>\*</code> | that contains 'filePath' and 'data' keys for the file and contents of the file. |

<a name="initializeSessionPackage"></a>

## initializeSessionPackage(db, sessionId) ⇒

This function assigns a proper package ID to the session.

**Kind**: global function  
**Returns**: Promise that resolves with the session id for chaining.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| sessionId | <code>\*</code> |

<a name="readPropertiesFile"></a>

## readPropertiesFile(ctx) ⇒

Reads the properties file into ctx.data and also calculates crc into ctx.crc

**Kind**: global function  
**Returns**: Promise to populate data, filePath and crc into the context.

| Param | Type            |
| ----- | --------------- |
| ctx   | <code>\*</code> |

<a name="recordToplevelPackage"></a>

## recordToplevelPackage(ctx)

Records the toplevel package information and puts ctx.packageId into the context.

**Kind**: global function

| Param | Type            |
| ----- | --------------- |
| ctx   | <code>\*</code> |

<a name="collectData"></a>

## collectData(propertiesFile) ⇒

Promises to read the properties file, extract all the actual xml files, and resolve with the array of files.

**Kind**: global function  
**Returns**: Promise of resolved files.

| Param          | Type            |
| -------------- | --------------- |
| propertiesFile | <code>\*</code> |

<a name="readZclFile"></a>

## readZclFile(file) ⇒

Promises to read a file and resolve with the content

**Kind**: global function  
**Returns**: promise that resolves as readFile

| Param | Type            |
| ----- | --------------- |
| file  | <code>\*</code> |

<a name="parseZclFile"></a>

## parseZclFile(argument) ⇒

Promises to parse the ZCL file, expecting object of { filePath, data, packageId, msg }

**Kind**: global function  
**Returns**: promise that resolves with the array [filePath,result,packageId,msg]

| Param    | Type            |
| -------- | --------------- |
| argument | <code>\*</code> |

<a name="prepareBitmap"></a>

## prepareBitmap(bm) ⇒

Prepare bitmap for database insertion.

**Kind**: global function  
**Returns**: Object for insertion into the database

| Param | Type            |
| ----- | --------------- |
| bm    | <code>\*</code> |

<a name="processBitmaps"></a>

## processBitmaps(db, filePath, packageId, data) ⇒

Processes bitmaps for DB insertion.

**Kind**: global function  
**Returns**: Promise of inserted bitmaps

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="prepareCluster"></a>

## prepareCluster(cluster) ⇒

Prepare XML cluster for insertion into the database.
This method can also prepare clusterExtensions.

**Kind**: global function  
**Returns**: Object containing all data from XML.

| Param   | Type            |
| ------- | --------------- |
| cluster | <code>\*</code> |

<a name="processClusters"></a>

## processClusters(db, filePath, packageId, data) ⇒

Process clusters for insertion into the database.

**Kind**: global function  
**Returns**: Promise of cluster insertion.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="processClusterExtensions"></a>

## processClusterExtensions(db, filePath, packageId, data) ⇒

Cluster Extension contains attributes and commands in a same way as regular cluster,
and it has an attribute code="0xXYZ" where code is a cluster code.

**Kind**: global function  
**Returns**: promise to resolve the clusterExtension tags

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="processGlobals"></a>

## processGlobals(db, filePath, packageId, data) ⇒

Processes the globals in the XML files. The `global` tag contains
attributes and commands in a same way as cluster or clusterExtension

**Kind**: global function  
**Returns**: promise to resolve the globals

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="prepareDomain"></a>

## prepareDomain(domain) ⇒

Convert domain from XMl to domain for DB.

**Kind**: global function  
**Returns**: Domain object for DB.

| Param  | Type            |
| ------ | --------------- |
| domain | <code>\*</code> |

<a name="processDomains"></a>

## processDomains(db, filePath, packageId, data) ⇒

Process domains for insertion.

**Kind**: global function  
**Returns**: Promise of database insertion of domains.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="prepareStruct"></a>

## prepareStruct(struct) ⇒

Prepares structs for the insertion into the database.

**Kind**: global function  
**Returns**: Object ready to insert into the database.

| Param  | Type            |
| ------ | --------------- |
| struct | <code>\*</code> |

<a name="processStructs"></a>

## processStructs(db, filePath, packageId, data) ⇒

Processes structs.

**Kind**: global function  
**Returns**: Promise of inserted structs.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="prepareEnum"></a>

## prepareEnum(en) ⇒

Prepares an enum for insertion into the database.

**Kind**: global function  
**Returns**: An object ready to go to the database.

| Param | Type            |
| ----- | --------------- |
| en    | <code>\*</code> |

<a name="processEnums"></a>

## processEnums(db, filePath, packageId, data) ⇒

Processes the enums.

**Kind**: global function  
**Returns**: A promise of inserted enums.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="prepareDeviceType"></a>

## prepareDeviceType(deviceType) ⇒

Preparation step for the device types.

**Kind**: global function  
**Returns**: an object containing the prepared device types.

| Param      | Type            |
| ---------- | --------------- |
| deviceType | <code>\*</code> |

<a name="processDeviceTypes"></a>

## processDeviceTypes(db, filePath, packageId, data) ⇒

Process all device types.

**Kind**: global function  
**Returns**: Promise of a resolved device types.

| Param     | Type            |
| --------- | --------------- |
| db        | <code>\*</code> |
| filePath  | <code>\*</code> |
| packageId | <code>\*</code> |
| data      | <code>\*</code> |

<a name="processParsedZclData"></a>

## processParsedZclData(db, argument) ⇒

After XML parser is done with the barebones parsing, this function
branches the individual toplevel tags.

**Kind**: global function  
**Returns**: promise that resolves when all the subtags are parsed.

| Param    | Type            |
| -------- | --------------- |
| db       | <code>\*</code> |
| argument | <code>\*</code> |

<a name="resolveLaterPromises"></a>

## resolveLaterPromises(laterPromises)

Resolve later promises.
This function resolves the later promises associated with processParsedZclData.

**Kind**: global function

| Param         | Type            |
| ------------- | --------------- |
| laterPromises | <code>\*</code> |

<a name="processZclPostLoading"></a>

## processZclPostLoading(db) ⇒

Promises to perform a post loading step.

**Kind**: global function  
**Returns**: Promise to deal with the post-loading cleanup.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |

<a name="qualifyZclFile"></a>

## qualifyZclFile(db, info, parentPackageId) ⇒

Promises to qualify whether zcl file needs to be reloaded.
If yes, the it will resolve with {filePath, data, packageId}
If not, then it will resolve with {error}

**Kind**: global function  
**Returns**: Promise that resolves int he object of data.

| Param           | Type            |
| --------------- | --------------- |
| db              | <code>\*</code> |
| info            | <code>\*</code> |
| parentPackageId | <code>\*</code> |

<a name="parseZclFiles"></a>

## parseZclFiles(db, ctx) ⇒

Promises to iterate over all the XML files and returns an aggregate promise
that will be resolved when all the XML files are done, or rejected if at least one fails.

**Kind**: global function  
**Returns**: Promise that resolves when all the individual promises of each file pass.

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| ctx   | <code>\*</code> |

<a name="recordVersion"></a>

## recordVersion(db, ctx)

Records the version into the database.

**Kind**: global function

| Param | Type            |
| ----- | --------------- |
| db    | <code>\*</code> |
| ctx   | <code>\*</code> |

<a name="loadZcl"></a>

## loadZcl(db, propertiesFile) ⇒

Toplevel function that loads the properties file and orchestrates the promise chain.

**Kind**: global function  
**Returns**: a Promise that resolves with the db.

| Param          | Type            |
| -------------- | --------------- |
| db             | <code>\*</code> |
| propertiesFile | <code>\*</code> |
